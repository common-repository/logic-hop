LogicHop.prototype.previewSetup=function(i){var e=this,o=!1,s=i("<div/>"),a=i("<div/>").addClass("logichop-preview-content"),t=i("<div/>").addClass("logichop-preview-controls"),c=i("<div/>").addClass("logichop-preview-selector active").html("CONDITIONS"),l=i("<div/>").addClass("logichop-preview-selector").html("VARIABLES"),p=i("<div/>").addClass("logichop-preview-selector").html("CSS CLASSES"),d=i("<div/>").addClass("logichop-preview-content-display"),n=i("<ul/>").attr("id","logichop-preview-conditions"),r=i("<ul/>").attr("id","logichop-preview-variables").hide(),v=i("<ul/>").attr("id","logichop-preview-css-classes").hide(),h=i('<header><span class="dashicons dashicons-marker"></span> Logic Hop </header>'),g=i('<span class="dashicons dashicons-arrow-right logichop-preview-toggle"></span>');h.append(g),t.append(c,l,p),d.append(n,r,v),a.append(t,d),g.on("click",function(){g.toggleClass("dashicons-arrow-left dashicons-arrow-right"),s.toggleClass("active"),a.toggle(),s.hasClass("active")?s.draggable():(s.draggable("destroy").attr("style",""),n.show(),r.hide(),v.hide(),i(".logichop-preview-selector").removeClass("active"),c.addClass("active")),o||(e.previewConditions(i),a.show(),o=!0)}),c.on("click",function(){i(".logichop-preview-selector").removeClass("active"),i(this).addClass("active"),e.previewConditions(i),n.show(),r.hide(),v.hide()}),l.on("click",function(){i(".logichop-preview-selector").removeClass("active"),i(this).addClass("active"),e.previewVariables(i),r.show(),n.hide(),v.hide()}),p.on("click",function(){i(".logichop-preview-selector").removeClass("active"),i(this).addClass("active"),e.previewCSS(i),v.show(),r.hide(),n.hide()}),s.appendTo("body").addClass("logichop-preview-modal").append(h,a)},LogicHop.prototype.previewConditions=function(i){i("#logichop-preview-conditions").html(""),i(".logichop-js").each(function(){if(i(this).data("title")){var e=i(this),o=e.data("title"),s=e.is(":visible")?"active":"";"object"==typeof o&&(o=JSON.stringify(o));var a=i('<div class="dashicons"></div>'),t=i("<div/>").addClass("logichop-preview-content-title").html(o);i("<li/>").appendTo("#logichop-preview-conditions").on("click",function(){e.fadeToggle(),i(this).toggleClass("active")}).hover(function(){e.addClass("logichop-preview-active")},function(){e.removeClass("logichop-preview-active")}).addClass(s).addClass("logichop-clearfix").append(a,t)}})},LogicHop.prototype.previewVariables=function(i){i("#logichop-preview-variables").html(""),i(".logichop-js").each(function(){if(i(this).data("var")){var e=i(this),o=e.data("var"),s=e.is(":visible")?"active":"",a=i('<div class="dashicons"></div>'),t=i("<div/>").addClass("logichop-preview-content-title"),c=i('<input type="text">').val(e.html()).keyup(function(){e.html(i(this).val())}).change(function(){e.html(i(this).val())}).on("click",function(i){i.stopPropagation()});t.html(o).append(c),i("<li/>").appendTo("#logichop-preview-variables").on("click",function(){e.fadeToggle(),i(this).toggleClass("active")}).hover(function(){e.addClass("logichop-preview-active")},function(){e.removeClass("logichop-preview-active")}).addClass(s).addClass("logichop-clearfix").append(a,t)}})},LogicHop.prototype.previewCSS=function(i){i("#logichop-preview-css-classes").html(""),"object"==typeof this.data.css_preview&&i.each(this.data.css_preview,function(e,o){var s=o.class,a=o.active?"active":"",t=i('<div class="dashicons"></div>'),c=i("<div/>").addClass("logichop-preview-content-title").html(s);i("<li/>").appendTo("#logichop-preview-css-classes").on("click",function(){i(this).toggleClass("active");var e=!!i(this).hasClass("active"),o="body."==s.substring(0,5),a=o?s.substring(5):s;if(o)e?i("body").addClass(a):i("body").removeClass(a);else{if(e)var t="."+s+" { display: block !important; }";else t="."+s+" { display: none !important; }";i("#logichop_header_css").append(t)}}).hover(function(){"body."!=s.substring(0,5)&&i("."+s).addClass("logichop-preview-active")},function(){"body."!=s.substring(0,5)&&i("."+s).removeClass("logichop-preview-active")}).addClass(a).addClass("logichop-clearfix").append(t,c)})},jQuery(document).ready(function(){logichop.previewSetup(jQuery),jQuery(".logichop-preview-button").find("a").click(function(i){i.preventDefault(),jQuery(".logichop-preview-toggle").trigger("click")})});